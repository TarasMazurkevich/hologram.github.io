!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("lazy-line-painter",[],e):"object"==typeof exports?exports["lazy-line-painter"]=e():t["lazy-line-painter"]=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={easeLinear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return--t*t*t*t*t+1},easeInOutQuint:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*Math.PI/2)},easeOutSine:function(t){return Math.sin(t*Math.PI/2)},easeInOutSine:function(t){return.5*(1-Math.cos(Math.PI*t))},easeInExpo:function(t){return 0===t?0:Math.pow(1024,t-1)},easeOutExpo:function(t){return 1===t?t:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},easeInCirc:function(t){return 1-Math.sqrt(1-t*t)},easeOutCirc:function(t){return Math.sqrt(1- --t*t)},easeInOutCirc:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInBounce:function(t){return 1-this.easeOutBounce(1-t)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*this.easeInBounce(2*t):.5*this.easeOutBounce(2*t-1)+.5}};e.default=i,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={on:function(t,e){this._eventEmitterCallbacks=this._eventEmitterCallbacks||{},this._eventEmitterCallbacks[t]=this._eventEmitterCallbacks[t]||[],this._eventEmitterCallbacks[t].push(e)}};i.addListener=i.on,i.off=function(t,e){if(this._eventEmitterCallbacks=this._eventEmitterCallbacks||{},t in this._eventEmitterCallbacks){var n=this._eventEmitterCallbacks[t].indexOf(e);n<0||this._eventEmitterCallbacks[t].splice(n,1)}},i.removeListener=i.off,i.emit=function(t,e){if(this._eventEmitterCallbacks=this._eventEmitterCallbacks||{},t in this._eventEmitterCallbacks){var n=!0,i=!1,s=void 0;try{for(var r,a=this._eventEmitterCallbacks[t][Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var o=r.value;if("function"!=typeof o)return;o(e)}}catch(t){i=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw s}}}},i.trigger=i.emit;var s=i;e.default=s,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),s=r(n(0));function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e,n){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(this,"_onVisibilityChange",function(){document.hidden?s.pause():s.resume()}),this.el=e,this.el.classList.add("lazy-line-painter"),this.config=Object.assign({strokeWidth:null,strokeDash:null,strokeColor:null,strokeOverColor:null,strokeCap:null,strokeJoin:null,strokeOpacity:null,delay:0,ease:null,drawSequential:!1,speedMultiplier:1,reverse:!1,paused:!1,progress:0,longestDuration:0,log:!0,offset:this.el.getBoundingClientRect()},n,{}),Object.assign(this,i.default,{}),this.__raf=null,this.__paths=[],this._generatePaths(),this._parseDataAttrs(),this._updateDuration(),this._setupPaths(),document.addEventListener("visibilitychange",this._onVisibilityChange)}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"_generatePaths",value:function(){var t;t=Boolean(this.el.dataset.llpComposed)?this.el.querySelectorAll("[data-llp-id]"):this._uncomposed();for(var e=0;e<t.length;e++){var n={el:t[e]};this.__paths.push(n)}}},{key:"_uncomposed",value:function(){var t,e=this.el.querySelectorAll("path, polygon, circle, ellipse, polyline, line, rect");for(t=0;t<e.length;t++){var n=this.el.id.replace(/ /g,"");n=(n=n.replace(".","")).replace("-",""),e[t].dataset.llpId=n+"-"+t,e[t].dataset.llpDuration||(e[t].dataset.llpDuration=5e3),e[t].dataset.llpDuration||(e[t].dataset.llpDelay=0)}return this.config.log&&console.log("This lazy line is uncomposed! Visit http://lazylinepainter.info to compose your masterpiece!"),e}},{key:"paint",value:function(t){Object.assign(this.config,t),this._updateDuration(),this.erase(),this._paint(),this.emit("start")}},{key:"pause",value:function(){this.config&&(this.config.paused=!0),cancelAnimationFrame(this.__raf),this.emit("pause")}},{key:"resume",value:function(){var t=this;this.config&&this.config.paused&&(requestAnimationFrame(function(){t.adjustStartTime()}),this.config.paused=!1,this.emit("resume"))}},{key:"erase",value:function(){this.config.startTime=null,this.config.elapsedTime=null,cancelAnimationFrame(this.__raf),this.config.onStrokeCompleteDone=!1,this.config.paused=!1;for(var t=0;t<this.__paths.length;t++){var e=this.__paths[t];e.el.style.strokeDashoffset=e.length,e.onStrokeCompleteDone=!1,e.onStrokeStartDone=!1}this.emit("erase")}},{key:"destroy",value:function(){this.config=null,this.el.remove(),this.el=null}},{key:"set",value:function(t,e){switch(t){case"progress":this._setProgress(e);break;case"delay":this._setDelay(e);break;case"reverse":this._setReverse(e);break;case"ease":this._setEase(e);break;default:this.config.log&&console.log("property "+t+" can not be set")}}},{key:"_setEase",value:function(t){this.config.ease=t}},{key:"_setProgress",value:function(t){this.pause(),this.config.progress=this._getProgress(t,this.config.ease),this._updatePaths(),this.config.elapsedTime=this.config.progress*this.config.totalDuration}},{key:"_setDelay",value:function(t){this.config.delay=t,this._updateDuration()}},{key:"_setReverse",value:function(t){this.config.reverse=t,this._updateDuration()}},{key:"_updateDuration",value:function(){var t=this._getTotalDuration(),e=this._getLongestDuration();this.config.totalDuration=this.config.drawSequential?t:e,this.config.totalDuration+=this.config.delay,this._calcPathDurations()}},{key:"_calcPathDurations",value:function(){for(var t=0;t<this.__paths.length;t++){var e=this.__paths[t],n=void 0;e.progress=0,n=this.config.reverse?this.config.drawSequential?0:this.config.totalDuration-(e.delay+e.duration):this.config.drawSequential?0:this.config.delay+e.delay,e.startTime=n,e.startProgress=e.startTime/this.config.totalDuration,e.durationProgress=e.duration/this.config.totalDuration}}},{key:"get",value:function(){return this.config}},{key:"resize",value:function(){this.config.offset=this.el.getBoundingClientRect();for(var t=0;t<this.__paths.length;t++){var e=this.__paths[t];e.el.getBoundingClientRect(),e.positions=this._getPathPoints(e.el,e.length),this._updatePosition(e)}}},{key:"_parseDataAttrs",value:function(){for(var t=0;t<this.__paths.length;t++){var e=this.__paths[t];e.id=e.el.dataset.llpId,e.delay=Number(e.el.dataset.llpDelay)||0,e.duration=Number(e.el.dataset.llpDuration)||0,e.reverse=Boolean(e.el.dataset.llpReverse)||!1,e.ease=Number(e.el.dataset.llpEase)||null,e.strokeDash=e.el.dataset.llpStrokeDash||null,e.delay*=this.config.speedMultiplier,e.duration*=this.config.speedMultiplier,this._setStyleAttrs(e)}}},{key:"_setStyleAttrs",value:function(t){t.strokeColor=t.el.dataset.llpStrokeColor||this.config.strokeColor,t.strokeColor&&(t.el.style.stroke=t.strokeColor),t.strokeOpacity=t.el.dataset.llpStrokeOpacity||this.config.strokeOpacity,t.strokeOpacity&&(t.el.style.strokeOpacity=t.strokeOpacity),t.strokeWidth=t.el.dataset.llpStrokeWidth||this.config.strokeWidth,t.strokeWidth&&(t.el.style.strokeWidth=t.strokeWidth),t.strokeCap=t.el.dataset.llpStrokeCap||this.config.strokeCap,t.strokeCap&&(t.el.style.strokeLinecap=t.strokeCap),t.strokeJoin=t.el.dataset.llpStrokeJoin||this.config.strokeJoin,t.strokeJoin&&(t.el.style.strokeLinejoin=t.strokeJoin)}},{key:"_setupPaths",value:function(){for(var t=0;t<this.__paths.length;t++){var e=this.__paths[t];e.index=t,e.length=this._getPathLength(e.el),e.positions=this._getPathPoints(e.el,e.length),e.el.style.strokeDasharray=this._getStrokeDashArray(e,e.length),e.el.style.strokeDashoffset=e.length,e.onStrokeStartDone=!1,e.onStrokeCompleteDone=!1}}},{key:"adjustStartTime",value:function(){var t=this,e=performance.now();this.config.startTime=e-this.config.elapsedTime,requestAnimationFrame(function(){t._paint()})}},{key:"_paint",value:function(){var t=this;if(this.config){this.config.startTime||(this.config.startTime=performance.now()),this.emit("update");var e=performance.now();this.config.elapsedTime=e-this.config.startTime,this.config.linearProgress=this.config.elapsedTime/this.config.totalDuration,this.config.progress=this._getProgress(this.config.linearProgress,this.config.ease),this._updatePaths(),this.config.linearProgress>=0&&this.config.linearProgress<=1?this.__raf=requestAnimationFrame(function(){t._paint()}):this.emit("complete")}}},{key:"_updatePaths",value:function(){for(var t=0;t<this.__paths.length;t++){var e=this.__paths[t],n=this._getElapsedProgress(e);e.progress=this._getProgress(n,e.ease),this._setLine(e),this._updatePosition(e),this._updateStrokeCallbacks(e)}}},{key:"_getElapsedProgress",value:function(t){var e;return this.config.progress>=t.startProgress&&this.config.progress<=t.startProgress+t.durationProgress?e=(this.config.progress-t.startProgress)/t.durationProgress:this.config.progress>=t.startProgress+t.durationProgress?e=1:this.config.progress<=t.startProgress&&(e=0),e}},{key:"_getProgress",value:function(t,e){var n=t;return e&&(n=s.default[e](t)),n}},{key:"_setLine",value:function(t){var e=t.el,n=t.progress*t.length;t.reverse?e.style.strokeDashoffset=-t.length+n:this.config.reverse?e.style.strokeDashoffset=-t.length+n:e.style.strokeDashoffset=t.length-n}},{key:"_updateStrokeCallbacks",value:function(t){1===t.progress?t.onStrokeCompleteDone||(t.onStrokeCompleteDone=!0,this.emit("complete:"+t.id,t),this.emit("complete:all",t)):t.progress>1e-5&&(t.onStrokeStartDone||(this.emit("start:"+t.id,t),this.emit("start:all",t),t.onStrokeStartDone=!0),this.emit("update:"+t.id,t),this.emit("update:all",t))}},{key:"_updatePosition",value:function(t){var e=Math.round(t.progress*(t.length-1)),n=t.positions[e];n&&(t.position={x:this.config.offset.left+n.x,y:this.config.offset.top+n.y})}},{key:"_getTotalDuration",value:function(){for(var t=0,e=this.__paths,n=0;n<e.length;n++){var i=e[n].delay||0;t+=e[n].duration+i}return t}},{key:"_getLongestDuration",value:function(){for(var t=0,e=this.__paths,n=0;n<e.length;n++){var i=e[n].delay+e[n].duration;i>t&&(t=i)}return t}},{key:"_getPathLength",value:function(t){return this._getTotalLength(t)}},{key:"_getDistance",value:function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"_getCircleLength",value:function(t){return 2*Math.PI*t.getAttribute("r")}},{key:"_getEllipseLength",value:function(t){var e=parseInt(t.getAttribute("rx"),1),n=parseInt(t.getAttribute("ry"),1),i=Math.pow(e-n,2)/Math.pow(e+n,2);return Math.PI*(e+n)*(1+3*i/Math.sqrt(4-3*i))}},{key:"_getRectLength",value:function(t){return 2*t.getAttribute("width")+2*t.getAttribute("height")}},{key:"_getLineLength",value:function(t){return this._getDistance({x:t.getAttribute("x1"),y:t.getAttribute("y1")},{x:t.getAttribute("x2"),y:t.getAttribute("y2")})}},{key:"_getPolylineLength",value:function(t){for(var e,n=t.points,i=0,s=0;s<n.numberOfItems;s++){var r=n.getItem(s);s>0&&(i+=this._getDistance(e,r)),e=r}return i}},{key:"_getPolygonLength",value:function(t){var e=t.points;return this._getPolylineLength(t)+this._getDistance(e.getItem(e.numberOfItems-1),e.getItem(0))}},{key:"_getTotalLength",value:function(t){var e=t.getTotalLength();if(!t.getTotalLength||0===e)switch(t.tagName.toLowerCase()){case"circle":e=this._getCircleLength(t);break;case"ellipse":e=this._getEllipseLength(t);break;case"rect":e=this._getRectLength(t);break;case"line":e=this._getLineLength(t);break;case"polyline":e=this._getPolylineLength(t);break;case"polygon":e=this._getPolygonLength(t)}return e}},{key:"_getPathPoints",value:function(t,e){for(var n=[],i=0;i<e;i++){var s=t.getPointAtLength(i);n.push({x:s.x,y:s.y})}return n}},{key:"_getStrokeDashArray",value:function(t,e){return t.strokeDash?this._getStrokeDashString(t.strokeDash,e):this.config.strokeDash?this._getStrokeDashString(this.config.strokeDash,e):e+" "+e}},{key:"_getStrokeDashString",value:function(t,e){for(var n,i,s="",r=t.split(","),a=0,o=r.length-1;o>=0;o--)a+=Number(r[o]);i=e-(n=Math.floor(e/a))*a;for(var l=0;l<n;l++)s+=t+", ";return(s+i+", "+(e+2)).split(",").join("px,")+"px"}}]),t}();window.LazyLinePainter=o;var l=o;e.default=l,t.exports=e.default}])});
//# sourceMappingURL=lazy-line-painter-1.9.3.min.js.map
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJsYXp5LWxpbmUtcGFpbnRlci0xLjkuMy5taW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJsYXp5LWxpbmUtcGFpbnRlclwiLFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHNbXCJsYXp5LWxpbmUtcGFpbnRlclwiXT1lKCk6dFtcImxhenktbGluZS1wYWludGVyXCJdPWUoKX0od2luZG93LGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlPXt9O2Z1bmN0aW9uIG4oaSl7aWYoZVtpXSlyZXR1cm4gZVtpXS5leHBvcnRzO3ZhciBzPWVbaV09e2k6aSxsOiExLGV4cG9ydHM6e319O3JldHVybiB0W2ldLmNhbGwocy5leHBvcnRzLHMscy5leHBvcnRzLG4pLHMubD0hMCxzLmV4cG9ydHN9cmV0dXJuIG4ubT10LG4uYz1lLG4uZD1mdW5jdGlvbih0LGUsaSl7bi5vKHQsZSl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2VudW1lcmFibGU6ITAsZ2V0Oml9KX0sbi5yPWZ1bmN0aW9uKHQpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LG4udD1mdW5jdGlvbih0LGUpe2lmKDEmZSYmKHQ9bih0KSksOCZlKXJldHVybiB0O2lmKDQmZSYmXCJvYmplY3RcIj09dHlwZW9mIHQmJnQmJnQuX19lc01vZHVsZSlyZXR1cm4gdDt2YXIgaT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihpKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxcImRlZmF1bHRcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTp0fSksMiZlJiZcInN0cmluZ1wiIT10eXBlb2YgdClmb3IodmFyIHMgaW4gdCluLmQoaSxzLGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfS5iaW5kKG51bGwscykpO3JldHVybiBpfSxuLm49ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIG4uZChlLFwiYVwiLGUpLGV9LG4ubz1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sbi5wPVwiXCIsbihuLnM9Mil9KFtmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5kZWZhdWx0PXZvaWQgMDt2YXIgaT17ZWFzZUxpbmVhcjpmdW5jdGlvbih0KXtyZXR1cm4gdH0sZWFzZUluUXVhZDpmdW5jdGlvbih0KXtyZXR1cm4gdCp0fSxlYXNlT3V0UXVhZDpmdW5jdGlvbih0KXtyZXR1cm4gdCooMi10KX0sZWFzZUluT3V0UXVhZDpmdW5jdGlvbih0KXtyZXR1cm4odCo9Mik8MT8uNSp0KnQ6LS41KigtLXQqKHQtMiktMSl9LGVhc2VJbkN1YmljOmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqdH0sZWFzZU91dEN1YmljOmZ1bmN0aW9uKHQpe3JldHVybi0tdCp0KnQrMX0sZWFzZUluT3V0Q3ViaWM6ZnVuY3Rpb24odCl7cmV0dXJuKHQqPTIpPDE/LjUqdCp0KnQ6LjUqKCh0LT0yKSp0KnQrMil9LGVhc2VJblF1YXJ0OmZ1bmN0aW9uKHQpe3JldHVybiB0KnQqdCp0fSxlYXNlT3V0UXVhcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIDEtIC0tdCp0KnQqdH0sZWFzZUluT3V0UXVhcnQ6ZnVuY3Rpb24odCl7cmV0dXJuKHQqPTIpPDE/LjUqdCp0KnQqdDotLjUqKCh0LT0yKSp0KnQqdC0yKX0sZWFzZUluUXVpbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQqdCp0KnQqdH0sZWFzZU91dFF1aW50OmZ1bmN0aW9uKHQpe3JldHVybi0tdCp0KnQqdCp0KzF9LGVhc2VJbk91dFF1aW50OmZ1bmN0aW9uKHQpe3JldHVybih0Kj0yKTwxPy41KnQqdCp0KnQqdDouNSooKHQtPTIpKnQqdCp0KnQrMil9LGVhc2VJblNpbmU6ZnVuY3Rpb24odCl7cmV0dXJuIDEtTWF0aC5jb3ModCpNYXRoLlBJLzIpfSxlYXNlT3V0U2luZTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5zaW4odCpNYXRoLlBJLzIpfSxlYXNlSW5PdXRTaW5lOmZ1bmN0aW9uKHQpe3JldHVybi41KigxLU1hdGguY29zKE1hdGguUEkqdCkpfSxlYXNlSW5FeHBvOmZ1bmN0aW9uKHQpe3JldHVybiAwPT09dD8wOk1hdGgucG93KDEwMjQsdC0xKX0sZWFzZU91dEV4cG86ZnVuY3Rpb24odCl7cmV0dXJuIDE9PT10P3Q6MS1NYXRoLnBvdygyLC0xMCp0KX0sZWFzZUluT3V0RXhwbzpmdW5jdGlvbih0KXtyZXR1cm4gMD09PXQ/MDoxPT09dD8xOih0Kj0yKTwxPy41Kk1hdGgucG93KDEwMjQsdC0xKTouNSooMi1NYXRoLnBvdygyLC0xMCoodC0xKSkpfSxlYXNlSW5DaXJjOmZ1bmN0aW9uKHQpe3JldHVybiAxLU1hdGguc3FydCgxLXQqdCl9LGVhc2VPdXRDaXJjOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnNxcnQoMS0gLS10KnQpfSxlYXNlSW5PdXRDaXJjOmZ1bmN0aW9uKHQpe3JldHVybih0Kj0yKTwxPy0uNSooTWF0aC5zcXJ0KDEtdCp0KS0xKTouNSooTWF0aC5zcXJ0KDEtKHQtPTIpKnQpKzEpfSxlYXNlSW5Cb3VuY2U6ZnVuY3Rpb24odCl7cmV0dXJuIDEtdGhpcy5lYXNlT3V0Qm91bmNlKDEtdCl9LGVhc2VPdXRCb3VuY2U6ZnVuY3Rpb24odCl7cmV0dXJuIHQ8MS8yLjc1PzcuNTYyNSp0KnQ6dDwyLzIuNzU/Ny41NjI1Kih0LT0xLjUvMi43NSkqdCsuNzU6dDwyLjUvMi43NT83LjU2MjUqKHQtPTIuMjUvMi43NSkqdCsuOTM3NTo3LjU2MjUqKHQtPTIuNjI1LzIuNzUpKnQrLjk4NDM3NX0sZWFzZUluT3V0Qm91bmNlOmZ1bmN0aW9uKHQpe3JldHVybiB0PC41Py41KnRoaXMuZWFzZUluQm91bmNlKDIqdCk6LjUqdGhpcy5lYXNlT3V0Qm91bmNlKDIqdC0xKSsuNX19O2UuZGVmYXVsdD1pLHQuZXhwb3J0cz1lLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLmRlZmF1bHQ9dm9pZCAwO3ZhciBpPXtvbjpmdW5jdGlvbih0LGUpe3RoaXMuX2V2ZW50RW1pdHRlckNhbGxiYWNrcz10aGlzLl9ldmVudEVtaXR0ZXJDYWxsYmFja3N8fHt9LHRoaXMuX2V2ZW50RW1pdHRlckNhbGxiYWNrc1t0XT10aGlzLl9ldmVudEVtaXR0ZXJDYWxsYmFja3NbdF18fFtdLHRoaXMuX2V2ZW50RW1pdHRlckNhbGxiYWNrc1t0XS5wdXNoKGUpfX07aS5hZGRMaXN0ZW5lcj1pLm9uLGkub2ZmPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fZXZlbnRFbWl0dGVyQ2FsbGJhY2tzPXRoaXMuX2V2ZW50RW1pdHRlckNhbGxiYWNrc3x8e30sdCBpbiB0aGlzLl9ldmVudEVtaXR0ZXJDYWxsYmFja3Mpe3ZhciBuPXRoaXMuX2V2ZW50RW1pdHRlckNhbGxiYWNrc1t0XS5pbmRleE9mKGUpO248MHx8dGhpcy5fZXZlbnRFbWl0dGVyQ2FsbGJhY2tzW3RdLnNwbGljZShuLDEpfX0saS5yZW1vdmVMaXN0ZW5lcj1pLm9mZixpLmVtaXQ9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9ldmVudEVtaXR0ZXJDYWxsYmFja3M9dGhpcy5fZXZlbnRFbWl0dGVyQ2FsbGJhY2tzfHx7fSx0IGluIHRoaXMuX2V2ZW50RW1pdHRlckNhbGxiYWNrcyl7dmFyIG49ITAsaT0hMSxzPXZvaWQgMDt0cnl7Zm9yKHZhciByLGE9dGhpcy5fZXZlbnRFbWl0dGVyQ2FsbGJhY2tzW3RdW1N5bWJvbC5pdGVyYXRvcl0oKTshKG49KHI9YS5uZXh0KCkpLmRvbmUpO249ITApe3ZhciBvPXIudmFsdWU7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgbylyZXR1cm47byhlKX19Y2F0Y2godCl7aT0hMCxzPXR9ZmluYWxseXt0cnl7bnx8bnVsbD09YS5yZXR1cm58fGEucmV0dXJuKCl9ZmluYWxseXtpZihpKXRocm93IHN9fX19LGkudHJpZ2dlcj1pLmVtaXQ7dmFyIHM9aTtlLmRlZmF1bHQ9cyx0LmV4cG9ydHM9ZS5kZWZhdWx0fSxmdW5jdGlvbih0LGUsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksZS5kZWZhdWx0PXZvaWQgMDt2YXIgaT1yKG4oMSkpLHM9cihuKDApKTtmdW5jdGlvbiByKHQpe3JldHVybiB0JiZ0Ll9fZXNNb2R1bGU/dDp7ZGVmYXVsdDp0fX1mdW5jdGlvbiBhKHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX12YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXt2YXIgcz10aGlzOyFmdW5jdGlvbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9KHRoaXMsdCksZnVuY3Rpb24odCxlLG4pe2UgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1ufSh0aGlzLFwiX29uVmlzaWJpbGl0eUNoYW5nZVwiLGZ1bmN0aW9uKCl7ZG9jdW1lbnQuaGlkZGVuP3MucGF1c2UoKTpzLnJlc3VtZSgpfSksdGhpcy5lbD1lLHRoaXMuZWwuY2xhc3NMaXN0LmFkZChcImxhenktbGluZS1wYWludGVyXCIpLHRoaXMuY29uZmlnPU9iamVjdC5hc3NpZ24oe3N0cm9rZVdpZHRoOm51bGwsc3Ryb2tlRGFzaDpudWxsLHN0cm9rZUNvbG9yOm51bGwsc3Ryb2tlT3ZlckNvbG9yOm51bGwsc3Ryb2tlQ2FwOm51bGwsc3Ryb2tlSm9pbjpudWxsLHN0cm9rZU9wYWNpdHk6bnVsbCxkZWxheTowLGVhc2U6bnVsbCxkcmF3U2VxdWVudGlhbDohMSxzcGVlZE11bHRpcGxpZXI6MSxyZXZlcnNlOiExLHBhdXNlZDohMSxwcm9ncmVzczowLGxvbmdlc3REdXJhdGlvbjowLGxvZzohMCxvZmZzZXQ6dGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX0sbix7fSksT2JqZWN0LmFzc2lnbih0aGlzLGkuZGVmYXVsdCx7fSksdGhpcy5fX3JhZj1udWxsLHRoaXMuX19wYXRocz1bXSx0aGlzLl9nZW5lcmF0ZVBhdGhzKCksdGhpcy5fcGFyc2VEYXRhQXR0cnMoKSx0aGlzLl91cGRhdGVEdXJhdGlvbigpLHRoaXMuX3NldHVwUGF0aHMoKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLHRoaXMuX29uVmlzaWJpbGl0eUNoYW5nZSl9cmV0dXJuIGZ1bmN0aW9uKHQsZSxuKXtlJiZhKHQucHJvdG90eXBlLGUpLG4mJmEodCxuKX0odCxbe2tleTpcIl9nZW5lcmF0ZVBhdGhzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdDt0PUJvb2xlYW4odGhpcy5lbC5kYXRhc2V0LmxscENvbXBvc2VkKT90aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1sbHAtaWRdXCIpOnRoaXMuX3VuY29tcG9zZWQoKTtmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyl7dmFyIG49e2VsOnRbZV19O3RoaXMuX19wYXRocy5wdXNoKG4pfX19LHtrZXk6XCJfdW5jb21wb3NlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJwYXRoLCBwb2x5Z29uLCBjaXJjbGUsIGVsbGlwc2UsIHBvbHlsaW5lLCBsaW5lLCByZWN0XCIpO2Zvcih0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciBuPXRoaXMuZWwuaWQucmVwbGFjZSgvIC9nLFwiXCIpO249KG49bi5yZXBsYWNlKFwiLlwiLFwiXCIpKS5yZXBsYWNlKFwiLVwiLFwiXCIpLGVbdF0uZGF0YXNldC5sbHBJZD1uK1wiLVwiK3QsZVt0XS5kYXRhc2V0LmxscER1cmF0aW9ufHwoZVt0XS5kYXRhc2V0LmxscER1cmF0aW9uPTVlMyksZVt0XS5kYXRhc2V0LmxscER1cmF0aW9ufHwoZVt0XS5kYXRhc2V0LmxscERlbGF5PTApfXJldHVybiB0aGlzLmNvbmZpZy5sb2cmJmNvbnNvbGUubG9nKFwiVGhpcyBsYXp5IGxpbmUgaXMgdW5jb21wb3NlZCEgVmlzaXQgaHR0cDovL2xhenlsaW5lcGFpbnRlci5pbmZvIHRvIGNvbXBvc2UgeW91ciBtYXN0ZXJwaWVjZSFcIiksZX19LHtrZXk6XCJwYWludFwiLHZhbHVlOmZ1bmN0aW9uKHQpe09iamVjdC5hc3NpZ24odGhpcy5jb25maWcsdCksdGhpcy5fdXBkYXRlRHVyYXRpb24oKSx0aGlzLmVyYXNlKCksdGhpcy5fcGFpbnQoKSx0aGlzLmVtaXQoXCJzdGFydFwiKX19LHtrZXk6XCJwYXVzZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jb25maWcmJih0aGlzLmNvbmZpZy5wYXVzZWQ9ITApLGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX19yYWYpLHRoaXMuZW1pdChcInBhdXNlXCIpfX0se2tleTpcInJlc3VtZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNvbmZpZyYmdGhpcy5jb25maWcucGF1c2VkJiYocmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7dC5hZGp1c3RTdGFydFRpbWUoKX0pLHRoaXMuY29uZmlnLnBhdXNlZD0hMSx0aGlzLmVtaXQoXCJyZXN1bWVcIikpfX0se2tleTpcImVyYXNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNvbmZpZy5zdGFydFRpbWU9bnVsbCx0aGlzLmNvbmZpZy5lbGFwc2VkVGltZT1udWxsLGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX19yYWYpLHRoaXMuY29uZmlnLm9uU3Ryb2tlQ29tcGxldGVEb25lPSExLHRoaXMuY29uZmlnLnBhdXNlZD0hMTtmb3IodmFyIHQ9MDt0PHRoaXMuX19wYXRocy5sZW5ndGg7dCsrKXt2YXIgZT10aGlzLl9fcGF0aHNbdF07ZS5lbC5zdHlsZS5zdHJva2VEYXNob2Zmc2V0PWUubGVuZ3RoLGUub25TdHJva2VDb21wbGV0ZURvbmU9ITEsZS5vblN0cm9rZVN0YXJ0RG9uZT0hMX10aGlzLmVtaXQoXCJlcmFzZVwiKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNvbmZpZz1udWxsLHRoaXMuZWwucmVtb3ZlKCksdGhpcy5lbD1udWxsfX0se2tleTpcInNldFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7c3dpdGNoKHQpe2Nhc2VcInByb2dyZXNzXCI6dGhpcy5fc2V0UHJvZ3Jlc3MoZSk7YnJlYWs7Y2FzZVwiZGVsYXlcIjp0aGlzLl9zZXREZWxheShlKTticmVhaztjYXNlXCJyZXZlcnNlXCI6dGhpcy5fc2V0UmV2ZXJzZShlKTticmVhaztjYXNlXCJlYXNlXCI6dGhpcy5fc2V0RWFzZShlKTticmVhaztkZWZhdWx0OnRoaXMuY29uZmlnLmxvZyYmY29uc29sZS5sb2coXCJwcm9wZXJ0eSBcIit0K1wiIGNhbiBub3QgYmUgc2V0XCIpfX19LHtrZXk6XCJfc2V0RWFzZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuY29uZmlnLmVhc2U9dH19LHtrZXk6XCJfc2V0UHJvZ3Jlc3NcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnBhdXNlKCksdGhpcy5jb25maWcucHJvZ3Jlc3M9dGhpcy5fZ2V0UHJvZ3Jlc3ModCx0aGlzLmNvbmZpZy5lYXNlKSx0aGlzLl91cGRhdGVQYXRocygpLHRoaXMuY29uZmlnLmVsYXBzZWRUaW1lPXRoaXMuY29uZmlnLnByb2dyZXNzKnRoaXMuY29uZmlnLnRvdGFsRHVyYXRpb259fSx7a2V5OlwiX3NldERlbGF5XCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5jb25maWcuZGVsYXk9dCx0aGlzLl91cGRhdGVEdXJhdGlvbigpfX0se2tleTpcIl9zZXRSZXZlcnNlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5jb25maWcucmV2ZXJzZT10LHRoaXMuX3VwZGF0ZUR1cmF0aW9uKCl9fSx7a2V5OlwiX3VwZGF0ZUR1cmF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9nZXRUb3RhbER1cmF0aW9uKCksZT10aGlzLl9nZXRMb25nZXN0RHVyYXRpb24oKTt0aGlzLmNvbmZpZy50b3RhbER1cmF0aW9uPXRoaXMuY29uZmlnLmRyYXdTZXF1ZW50aWFsP3Q6ZSx0aGlzLmNvbmZpZy50b3RhbER1cmF0aW9uKz10aGlzLmNvbmZpZy5kZWxheSx0aGlzLl9jYWxjUGF0aER1cmF0aW9ucygpfX0se2tleTpcIl9jYWxjUGF0aER1cmF0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLl9fcGF0aHMubGVuZ3RoO3QrKyl7dmFyIGU9dGhpcy5fX3BhdGhzW3RdLG49dm9pZCAwO2UucHJvZ3Jlc3M9MCxuPXRoaXMuY29uZmlnLnJldmVyc2U/dGhpcy5jb25maWcuZHJhd1NlcXVlbnRpYWw/MDp0aGlzLmNvbmZpZy50b3RhbER1cmF0aW9uLShlLmRlbGF5K2UuZHVyYXRpb24pOnRoaXMuY29uZmlnLmRyYXdTZXF1ZW50aWFsPzA6dGhpcy5jb25maWcuZGVsYXkrZS5kZWxheSxlLnN0YXJ0VGltZT1uLGUuc3RhcnRQcm9ncmVzcz1lLnN0YXJ0VGltZS90aGlzLmNvbmZpZy50b3RhbER1cmF0aW9uLGUuZHVyYXRpb25Qcm9ncmVzcz1lLmR1cmF0aW9uL3RoaXMuY29uZmlnLnRvdGFsRHVyYXRpb259fX0se2tleTpcImdldFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZmlnfX0se2tleTpcInJlc2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jb25maWcub2Zmc2V0PXRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7Zm9yKHZhciB0PTA7dDx0aGlzLl9fcGF0aHMubGVuZ3RoO3QrKyl7dmFyIGU9dGhpcy5fX3BhdGhzW3RdO2UuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksZS5wb3NpdGlvbnM9dGhpcy5fZ2V0UGF0aFBvaW50cyhlLmVsLGUubGVuZ3RoKSx0aGlzLl91cGRhdGVQb3NpdGlvbihlKX19fSx7a2V5OlwiX3BhcnNlRGF0YUF0dHJzXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX19wYXRocy5sZW5ndGg7dCsrKXt2YXIgZT10aGlzLl9fcGF0aHNbdF07ZS5pZD1lLmVsLmRhdGFzZXQubGxwSWQsZS5kZWxheT1OdW1iZXIoZS5lbC5kYXRhc2V0LmxscERlbGF5KXx8MCxlLmR1cmF0aW9uPU51bWJlcihlLmVsLmRhdGFzZXQubGxwRHVyYXRpb24pfHwwLGUucmV2ZXJzZT1Cb29sZWFuKGUuZWwuZGF0YXNldC5sbHBSZXZlcnNlKXx8ITEsZS5lYXNlPU51bWJlcihlLmVsLmRhdGFzZXQubGxwRWFzZSl8fG51bGwsZS5zdHJva2VEYXNoPWUuZWwuZGF0YXNldC5sbHBTdHJva2VEYXNofHxudWxsLGUuZGVsYXkqPXRoaXMuY29uZmlnLnNwZWVkTXVsdGlwbGllcixlLmR1cmF0aW9uKj10aGlzLmNvbmZpZy5zcGVlZE11bHRpcGxpZXIsdGhpcy5fc2V0U3R5bGVBdHRycyhlKX19fSx7a2V5OlwiX3NldFN0eWxlQXR0cnNcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnN0cm9rZUNvbG9yPXQuZWwuZGF0YXNldC5sbHBTdHJva2VDb2xvcnx8dGhpcy5jb25maWcuc3Ryb2tlQ29sb3IsdC5zdHJva2VDb2xvciYmKHQuZWwuc3R5bGUuc3Ryb2tlPXQuc3Ryb2tlQ29sb3IpLHQuc3Ryb2tlT3BhY2l0eT10LmVsLmRhdGFzZXQubGxwU3Ryb2tlT3BhY2l0eXx8dGhpcy5jb25maWcuc3Ryb2tlT3BhY2l0eSx0LnN0cm9rZU9wYWNpdHkmJih0LmVsLnN0eWxlLnN0cm9rZU9wYWNpdHk9dC5zdHJva2VPcGFjaXR5KSx0LnN0cm9rZVdpZHRoPXQuZWwuZGF0YXNldC5sbHBTdHJva2VXaWR0aHx8dGhpcy5jb25maWcuc3Ryb2tlV2lkdGgsdC5zdHJva2VXaWR0aCYmKHQuZWwuc3R5bGUuc3Ryb2tlV2lkdGg9dC5zdHJva2VXaWR0aCksdC5zdHJva2VDYXA9dC5lbC5kYXRhc2V0LmxscFN0cm9rZUNhcHx8dGhpcy5jb25maWcuc3Ryb2tlQ2FwLHQuc3Ryb2tlQ2FwJiYodC5lbC5zdHlsZS5zdHJva2VMaW5lY2FwPXQuc3Ryb2tlQ2FwKSx0LnN0cm9rZUpvaW49dC5lbC5kYXRhc2V0LmxscFN0cm9rZUpvaW58fHRoaXMuY29uZmlnLnN0cm9rZUpvaW4sdC5zdHJva2VKb2luJiYodC5lbC5zdHlsZS5zdHJva2VMaW5lam9pbj10LnN0cm9rZUpvaW4pfX0se2tleTpcIl9zZXR1cFBhdGhzXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX19wYXRocy5sZW5ndGg7dCsrKXt2YXIgZT10aGlzLl9fcGF0aHNbdF07ZS5pbmRleD10LGUubGVuZ3RoPXRoaXMuX2dldFBhdGhMZW5ndGgoZS5lbCksZS5wb3NpdGlvbnM9dGhpcy5fZ2V0UGF0aFBvaW50cyhlLmVsLGUubGVuZ3RoKSxlLmVsLnN0eWxlLnN0cm9rZURhc2hhcnJheT10aGlzLl9nZXRTdHJva2VEYXNoQXJyYXkoZSxlLmxlbmd0aCksZS5lbC5zdHlsZS5zdHJva2VEYXNob2Zmc2V0PWUubGVuZ3RoLGUub25TdHJva2VTdGFydERvbmU9ITEsZS5vblN0cm9rZUNvbXBsZXRlRG9uZT0hMX19fSx7a2V5OlwiYWRqdXN0U3RhcnRUaW1lXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9cGVyZm9ybWFuY2Uubm93KCk7dGhpcy5jb25maWcuc3RhcnRUaW1lPWUtdGhpcy5jb25maWcuZWxhcHNlZFRpbWUscmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7dC5fcGFpbnQoKX0pfX0se2tleTpcIl9wYWludFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLmNvbmZpZyl7dGhpcy5jb25maWcuc3RhcnRUaW1lfHwodGhpcy5jb25maWcuc3RhcnRUaW1lPXBlcmZvcm1hbmNlLm5vdygpKSx0aGlzLmVtaXQoXCJ1cGRhdGVcIik7dmFyIGU9cGVyZm9ybWFuY2Uubm93KCk7dGhpcy5jb25maWcuZWxhcHNlZFRpbWU9ZS10aGlzLmNvbmZpZy5zdGFydFRpbWUsdGhpcy5jb25maWcubGluZWFyUHJvZ3Jlc3M9dGhpcy5jb25maWcuZWxhcHNlZFRpbWUvdGhpcy5jb25maWcudG90YWxEdXJhdGlvbix0aGlzLmNvbmZpZy5wcm9ncmVzcz10aGlzLl9nZXRQcm9ncmVzcyh0aGlzLmNvbmZpZy5saW5lYXJQcm9ncmVzcyx0aGlzLmNvbmZpZy5lYXNlKSx0aGlzLl91cGRhdGVQYXRocygpLHRoaXMuY29uZmlnLmxpbmVhclByb2dyZXNzPj0wJiZ0aGlzLmNvbmZpZy5saW5lYXJQcm9ncmVzczw9MT90aGlzLl9fcmFmPXJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe3QuX3BhaW50KCl9KTp0aGlzLmVtaXQoXCJjb21wbGV0ZVwiKX19fSx7a2V5OlwiX3VwZGF0ZVBhdGhzXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX19wYXRocy5sZW5ndGg7dCsrKXt2YXIgZT10aGlzLl9fcGF0aHNbdF0sbj10aGlzLl9nZXRFbGFwc2VkUHJvZ3Jlc3MoZSk7ZS5wcm9ncmVzcz10aGlzLl9nZXRQcm9ncmVzcyhuLGUuZWFzZSksdGhpcy5fc2V0TGluZShlKSx0aGlzLl91cGRhdGVQb3NpdGlvbihlKSx0aGlzLl91cGRhdGVTdHJva2VDYWxsYmFja3MoZSl9fX0se2tleTpcIl9nZXRFbGFwc2VkUHJvZ3Jlc3NcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gdGhpcy5jb25maWcucHJvZ3Jlc3M+PXQuc3RhcnRQcm9ncmVzcyYmdGhpcy5jb25maWcucHJvZ3Jlc3M8PXQuc3RhcnRQcm9ncmVzcyt0LmR1cmF0aW9uUHJvZ3Jlc3M/ZT0odGhpcy5jb25maWcucHJvZ3Jlc3MtdC5zdGFydFByb2dyZXNzKS90LmR1cmF0aW9uUHJvZ3Jlc3M6dGhpcy5jb25maWcucHJvZ3Jlc3M+PXQuc3RhcnRQcm9ncmVzcyt0LmR1cmF0aW9uUHJvZ3Jlc3M/ZT0xOnRoaXMuY29uZmlnLnByb2dyZXNzPD10LnN0YXJ0UHJvZ3Jlc3MmJihlPTApLGV9fSx7a2V5OlwiX2dldFByb2dyZXNzXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10O3JldHVybiBlJiYobj1zLmRlZmF1bHRbZV0odCkpLG59fSx7a2V5OlwiX3NldExpbmVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LmVsLG49dC5wcm9ncmVzcyp0Lmxlbmd0aDt0LnJldmVyc2U/ZS5zdHlsZS5zdHJva2VEYXNob2Zmc2V0PS10Lmxlbmd0aCtuOnRoaXMuY29uZmlnLnJldmVyc2U/ZS5zdHlsZS5zdHJva2VEYXNob2Zmc2V0PS10Lmxlbmd0aCtuOmUuc3R5bGUuc3Ryb2tlRGFzaG9mZnNldD10Lmxlbmd0aC1ufX0se2tleTpcIl91cGRhdGVTdHJva2VDYWxsYmFja3NcIix2YWx1ZTpmdW5jdGlvbih0KXsxPT09dC5wcm9ncmVzcz90Lm9uU3Ryb2tlQ29tcGxldGVEb25lfHwodC5vblN0cm9rZUNvbXBsZXRlRG9uZT0hMCx0aGlzLmVtaXQoXCJjb21wbGV0ZTpcIit0LmlkLHQpLHRoaXMuZW1pdChcImNvbXBsZXRlOmFsbFwiLHQpKTp0LnByb2dyZXNzPjFlLTUmJih0Lm9uU3Ryb2tlU3RhcnREb25lfHwodGhpcy5lbWl0KFwic3RhcnQ6XCIrdC5pZCx0KSx0aGlzLmVtaXQoXCJzdGFydDphbGxcIix0KSx0Lm9uU3Ryb2tlU3RhcnREb25lPSEwKSx0aGlzLmVtaXQoXCJ1cGRhdGU6XCIrdC5pZCx0KSx0aGlzLmVtaXQoXCJ1cGRhdGU6YWxsXCIsdCkpfX0se2tleTpcIl91cGRhdGVQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgucm91bmQodC5wcm9ncmVzcyoodC5sZW5ndGgtMSkpLG49dC5wb3NpdGlvbnNbZV07biYmKHQucG9zaXRpb249e3g6dGhpcy5jb25maWcub2Zmc2V0LmxlZnQrbi54LHk6dGhpcy5jb25maWcub2Zmc2V0LnRvcCtuLnl9KX19LHtrZXk6XCJfZ2V0VG90YWxEdXJhdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLl9fcGF0aHMsbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dLmRlbGF5fHwwO3QrPWVbbl0uZHVyYXRpb24raX1yZXR1cm4gdH19LHtrZXk6XCJfZ2V0TG9uZ2VzdER1cmF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMuX19wYXRocyxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl0uZGVsYXkrZVtuXS5kdXJhdGlvbjtpPnQmJih0PWkpfXJldHVybiB0fX0se2tleTpcIl9nZXRQYXRoTGVuZ3RoXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2dldFRvdGFsTGVuZ3RoKHQpfX0se2tleTpcIl9nZXREaXN0YW5jZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhlLngtdC54LDIpK01hdGgucG93KGUueS10LnksMikpfX0se2tleTpcIl9nZXRDaXJjbGVMZW5ndGhcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gMipNYXRoLlBJKnQuZ2V0QXR0cmlidXRlKFwiclwiKX19LHtrZXk6XCJfZ2V0RWxsaXBzZUxlbmd0aFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwicnhcIiksMSksbj1wYXJzZUludCh0LmdldEF0dHJpYnV0ZShcInJ5XCIpLDEpLGk9TWF0aC5wb3coZS1uLDIpL01hdGgucG93KGUrbiwyKTtyZXR1cm4gTWF0aC5QSSooZStuKSooMSszKmkvTWF0aC5zcXJ0KDQtMyppKSl9fSx7a2V5OlwiX2dldFJlY3RMZW5ndGhcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gMip0LmdldEF0dHJpYnV0ZShcIndpZHRoXCIpKzIqdC5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIil9fSx7a2V5OlwiX2dldExpbmVMZW5ndGhcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZ2V0RGlzdGFuY2Uoe3g6dC5nZXRBdHRyaWJ1dGUoXCJ4MVwiKSx5OnQuZ2V0QXR0cmlidXRlKFwieTFcIil9LHt4OnQuZ2V0QXR0cmlidXRlKFwieDJcIikseTp0LmdldEF0dHJpYnV0ZShcInkyXCIpfSl9fSx7a2V5OlwiX2dldFBvbHlsaW5lTGVuZ3RoXCIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLG49dC5wb2ludHMsaT0wLHM9MDtzPG4ubnVtYmVyT2ZJdGVtcztzKyspe3ZhciByPW4uZ2V0SXRlbShzKTtzPjAmJihpKz10aGlzLl9nZXREaXN0YW5jZShlLHIpKSxlPXJ9cmV0dXJuIGl9fSx7a2V5OlwiX2dldFBvbHlnb25MZW5ndGhcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LnBvaW50cztyZXR1cm4gdGhpcy5fZ2V0UG9seWxpbmVMZW5ndGgodCkrdGhpcy5fZ2V0RGlzdGFuY2UoZS5nZXRJdGVtKGUubnVtYmVyT2ZJdGVtcy0xKSxlLmdldEl0ZW0oMCkpfX0se2tleTpcIl9nZXRUb3RhbExlbmd0aFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0VG90YWxMZW5ndGgoKTtpZighdC5nZXRUb3RhbExlbmd0aHx8MD09PWUpc3dpdGNoKHQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJjaXJjbGVcIjplPXRoaXMuX2dldENpcmNsZUxlbmd0aCh0KTticmVhaztjYXNlXCJlbGxpcHNlXCI6ZT10aGlzLl9nZXRFbGxpcHNlTGVuZ3RoKHQpO2JyZWFrO2Nhc2VcInJlY3RcIjplPXRoaXMuX2dldFJlY3RMZW5ndGgodCk7YnJlYWs7Y2FzZVwibGluZVwiOmU9dGhpcy5fZ2V0TGluZUxlbmd0aCh0KTticmVhaztjYXNlXCJwb2x5bGluZVwiOmU9dGhpcy5fZ2V0UG9seWxpbmVMZW5ndGgodCk7YnJlYWs7Y2FzZVwicG9seWdvblwiOmU9dGhpcy5fZ2V0UG9seWdvbkxlbmd0aCh0KX1yZXR1cm4gZX19LHtrZXk6XCJfZ2V0UGF0aFBvaW50c1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPVtdLGk9MDtpPGU7aSsrKXt2YXIgcz10LmdldFBvaW50QXRMZW5ndGgoaSk7bi5wdXNoKHt4OnMueCx5OnMueX0pfXJldHVybiBufX0se2tleTpcIl9nZXRTdHJva2VEYXNoQXJyYXlcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0LnN0cm9rZURhc2g/dGhpcy5fZ2V0U3Ryb2tlRGFzaFN0cmluZyh0LnN0cm9rZURhc2gsZSk6dGhpcy5jb25maWcuc3Ryb2tlRGFzaD90aGlzLl9nZXRTdHJva2VEYXNoU3RyaW5nKHRoaXMuY29uZmlnLnN0cm9rZURhc2gsZSk6ZStcIiBcIitlfX0se2tleTpcIl9nZXRTdHJva2VEYXNoU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG4saSxzPVwiXCIscj10LnNwbGl0KFwiLFwiKSxhPTAsbz1yLmxlbmd0aC0xO28+PTA7by0tKWErPU51bWJlcihyW29dKTtpPWUtKG49TWF0aC5mbG9vcihlL2EpKSphO2Zvcih2YXIgbD0wO2w8bjtsKyspcys9dCtcIiwgXCI7cmV0dXJuKHMraStcIiwgXCIrKGUrMikpLnNwbGl0KFwiLFwiKS5qb2luKFwicHgsXCIpK1wicHhcIn19XSksdH0oKTt3aW5kb3cuTGF6eUxpbmVQYWludGVyPW87dmFyIGw9bztlLmRlZmF1bHQ9bCx0LmV4cG9ydHM9ZS5kZWZhdWx0fV0pfSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxhenktbGluZS1wYWludGVyLTEuOS4zLm1pbi5qcy5tYXAiXSwiZmlsZSI6ImxhenktbGluZS1wYWludGVyLTEuOS4zLm1pbi5qcyJ9
